(()=>{"use strict";var t,e=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},n=function(t,e){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},r=function(){function t(){this.server="http://127.0.0.1:3000"}return t.prototype.getData=function(t,r){return e(this,void 0,void 0,(function(){var e,o,a;return n(this,(function(n){switch(n.label){case 0:e=this.server+"/"+t,void 0!==r&&(e+="/"+r),n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e)];case 2:if(!(o=n.sent()).ok)throw new Error("Response status: ".concat(o.status));return[4,o.json()];case 3:return[2,n.sent()];case 4:return a=n.sent(),console.log(a),[3,5];case 5:return[2]}}))}))},t.prototype.getWinners=function(t){return e(this,void 0,void 0,(function(){var e,r,o,a,i;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),void 0!==t?[3,2]:[4,Promise.all([this.getData("winners"),this.getData("garage")])];case 1:return e=n.sent(),r=e[0],o=e[1],[2,r.map((function(t){var e=o.find((function(e){return e.id===t.id}));return{id:t.id,name:e.name,color:e.color,wins:t.wins,time:t.time}}))];case 2:return[4,this.getData("winners",t)];case 3:return a=n.sent(),[4,this.getData("garage",t)];case 4:n.sent(),a?console.log("update winner"):console.log("new winner"),n.label=5;case 5:return[3,7];case 6:return i=n.sent(),console.log(i),[3,7];case 7:return[2]}}))}))},t.prototype.getWinnersInfo=function(){return e(this,void 0,void 0,(function(){var t,e,r,o;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Promise.all([this.getData("winners"),this.getData("garage")])];case 1:return t=n.sent(),e=t[0],r=t[1],[2,e.map((function(t){var e=r.find((function(e){return e.id===t.id}));return{id:t.id,name:e.name,color:e.color,wins:t.wins,time:t.time}}))];case 2:return o=n.sent(),console.error("Error fetching winners with car info:",o),[2,[]];case 3:return[2]}}))}))},t.prototype.createData=function(t,r){return e(this,void 0,void 0,(function(){var e,o,a;return n(this,(function(n){switch(n.label){case 0:e=this.server+"/"+t,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})];case 2:if(!(o=n.sent()).ok)throw new Error("Response status: ".concat(o.status));return[4,o.json()];case 3:return[2,n.sent()];case 4:return a=n.sent(),console.log(a),[3,5];case 5:return[2]}}))}))},t.prototype.deleteData=function(t,r){return e(this,void 0,void 0,(function(){var e,o,a;return n(this,(function(n){switch(n.label){case 0:e=this.server+"/"+t+"/"+r,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e,{method:"DELETE"})];case 2:if(!(o=n.sent()).ok)throw new Error("Response status: ".concat(o.status));return[4,o.json()];case 3:return[2,n.sent()];case 4:return a=n.sent(),console.log(a),[3,5];case 5:return[2]}}))}))},t.prototype.updateData=function(t,r,o){return e(this,void 0,void 0,(function(){var e,a,i;return n(this,(function(n){switch(n.label){case 0:e=this.server+"/"+t+"/"+r,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})];case 2:if(!(a=n.sent()).ok)throw new Error("Response status: ".concat(a.status));return[4,a.json()];case 3:return[2,n.sent()];case 4:return i=n.sent(),console.log(i),[3,5];case 5:return[2]}}))}))},t.prototype.carEngine=function(t,r){return e(this,void 0,void 0,(function(){var e,o,a,i;return n(this,(function(n){switch(n.label){case 0:e=new URLSearchParams({id:t.toString(),status:r}),o=this.server+"/engine?"+e,n.label=1;case 1:return n.trys.push([1,4,,5]),a=fetch(o,{method:"PATCH",body:new URLSearchParams({id:t.toString(),status:r})}),"started"!==r?[3,3]:[4,a.then((function(t){return t.json()})).then((function(e){return e.id=t,e}))];case 2:return[2,n.sent()];case 3:return"drive"===r?[2,a.then((function(t){return t.status})).then((function(e){return{id:t,status:e}}))]:[2,a];case 4:return i=n.sent(),console.log("Error:",i),[3,5];case 5:return[2]}}))}))},t}(),o=function(){function t(){this.controller=new E,this.htmlElements=[],this.root=document.getElementById("root"),this.headerContainer=document.getElementById("header-container"),this.mainContainer=document.getElementById("main-container"),this.raceCars=[]}return t.prototype.createElement=function(t,e,n){for(var r=document.createElement(t),o=0,a=Object.entries(n);o<a.length;o++){var i=a[o],c=i[0],s=i[1];switch(c){case"text":r.innerText=String(s);break;case"html":r.innerHTML=String(s);break;case"className":r.classList.add(String(s));break;case"color":r.setAttribute("style","fill: "+String(s));break;case"event":break;default:r.setAttribute(String(c),String(s))}"event"===c&&Array.isArray(s)&&r.addEventListener(s[0],s[1])}return this.htmlElements.push([r,e]),r},t.prototype.cleanView=function(t){t.replaceChildren()},t.prototype.mount=function(){this.htmlElements.forEach((function(t){t[1].appendChild(t[0])}))},t}(),a=(t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),i=function(t){function e(){var e=t.call(this)||this;return e.createHtmlElements(),e.mount(),e}return a(e,t),e.prototype.createHtmlElements=function(){var t=this,e=this.createElement("div",this.headerContainer,{id:"nav__garage-view",className:"nav__header",event:["click",function(){t.controller.getGarage(),e.classList.add("nav__header-active"),n.classList.remove("nav__header-active")}]});e.classList.add("nav__header-active"),this.createElement("h2",e,{text:"GARAGE"});var n=this.createElement("div",this.headerContainer,{id:"nav__winners-view",className:"nav__header",event:["click",function(){t.controller.getWinners(),n.classList.add("nav__header-active"),e.classList.remove("nav__header-active")}]});this.createElement("h2",n,{text:"WINNERS"})},e}(o);function c(t,e,n){return'\n<svg id="'.concat(t,'" class="').concat(e,'" version="1.0" xmlns="http://www.w3.org/2000/svg"\n width="80pt" height="40pt" viewBox="0 0 1280.000000 640.000000"\n preserveAspectRatio="xMidYMid meet">\n<g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)"\nfill="').concat(n,'" stroke="none">\n<path d="M3516 5330 c-50 -16 -64 -37 -72 -106 -3 -36 -14 -73 -23 -84 -9 -10\n-256 -114 -556 -233 -661 -263 -1047 -424 -1231 -512 -173 -83 -247 -102 -417\n-111 -79 -3 -174 -15 -237 -29 -144 -33 -260 -44 -503 -52 l-208 -6 -41 -70\nc-40 -70 -41 -70 -23 -99 24 -41 22 -113 -6 -194 -26 -74 -30 -186 -15 -361\nl7 -81 -36 -17 c-67 -33 -105 -110 -134 -277 -25 -137 -26 -191 -6 -273 11\n-43 13 -87 9 -155 -6 -85 -2 -125 21 -236 3 -12 24 -34 47 -49 71 -47 136\n-115 149 -153 15 -48 44 -79 100 -107 125 -64 192 -75 849 -135 239 -22 452\n-43 473 -46 l37 -6 0 109 c0 464 211 827 595 1025 347 178 751 165 1070 -35\n380 -238 552 -576 531 -1047 -3 -80 -9 -166 -12 -193 l-7 -47 2987 0 c1745 0\n2986 4 2986 9 0 5 -8 44 -17 87 -14 62 -18 123 -17 279 0 188 2 205 28 290 53\n177 121 291 245 416 196 196 442 323 695 358 255 36 517 -30 751 -187 285\n-191 449 -481 471 -830 5 -87 2 -137 -22 -306 l-7 -48 129 7 c195 10 387 34\n462 57 82 25 128 55 163 109 46 67 49 138 14 303 -16 73 -16 86 -1 180 8 56\n20 151 26 211 6 61 15 140 20 177 22 150 4 300 -51 427 -63 148 -299 264 -814\n400 -394 104 -741 174 -1125 225 -612 83 -1136 126 -1529 126 l-234 0 -201\n118 c-645 380 -1317 741 -1694 911 -313 141 -661 197 -1380 223 -462 16 -1216\n-5 -1784 -51 l-113 -9 -44 29 c-89 59 -234 92 -305 69z m1913 -253 c22 -27 76\n-342 146 -847 25 -187 31 -248 22 -257 -10 -10 -134 -9 -577 2 -1370 35 -1666\n48 -1775 76 -157 40 -250 113 -316 248 -27 54 -33 81 -37 146 -5 124 10 160\n88 213 166 112 461 232 704 286 356 80 982 138 1552 144 141 2 184 -1 193 -11z\nm761 -37 c379 -39 735 -97 905 -149 153 -47 331 -127 510 -229 211 -120 517\n-336 513 -362 -2 -9 -21 -17 -48 -22 -49 -9 -83 -30 -114 -72 -21 -27 -24 -80\n-14 -201 l3 -30 -910 0 -909 0 -173 530 c-94 292 -172 539 -172 549 -1 18 5\n19 107 12 59 -4 195 -16 302 -26z"/>\n<path d="M2619 3115 c-392 -74 -706 -370 -811 -763 -29 -109 -35 -308 -14\n-430 64 -367 330 -676 686 -797 516 -176 1087 88 1289 598 117 295 86 645 -81\n917 -136 222 -369 393 -626 462 -102 27 -335 34 -443 13z m390 -295 c223 -62\n408 -229 495 -445 156 -390 -54 -844 -453 -980 -413 -140 -850 97 -967 526\n-27 97 -25 271 4 373 71 249 269 453 507 521 135 39 283 41 414 5z"/>\n<path d="M2929 2714 c-6 -34 5 -301 12 -308 10 -11 221 193 216 209 -11 33\n-224 126 -228 99z"/>\n<path d="M2595 2692 c-53 -18 -140 -66 -150 -82 -6 -10 210 -205 228 -205 16\n0 21 92 12 213 -8 104 -6 103 -90 74z"/>\n<path d="M3207 2339 c-53 -60 -97 -114 -97 -119 0 -18 45 -21 175 -13 l130 8\n-3 35 c-3 42 -78 200 -95 200 -7 0 -56 -50 -110 -111z"/>\n<path d="M2263 2398 c-33 -53 -76 -167 -69 -185 4 -10 39 -13 149 -13 198 0\n198 0 66 135 -56 58 -106 105 -110 105 -5 0 -21 -19 -36 -42z"/>\n<path d="M2783 2334 c-3 -8 2 -23 11 -32 15 -15 17 -15 32 0 21 21 11 48 -16\n48 -11 0 -23 -7 -27 -16z"/>\n<path d="M2739 2161 c-32 -33 -37 -67 -14 -110 33 -65 131 -57 160 13 40 94\n-73 169 -146 97z"/>\n<path d="M2572 2131 c-21 -13 -10 -46 16 -49 27 -4 40 22 22 43 -14 17 -20 18\n-38 6z"/>\n<path d="M3007 2118 c-22 -12 -22 -35 1 -46 25 -13 42 -4 42 23 0 27 -19 37\n-43 23z"/>\n<path d="M2238 1983 c-39 -3 -48 -8 -48 -23 0 -53 90 -228 110 -215 23 14 190\n217 190 231 0 11 -19 14 -102 12 -57 -1 -124 -3 -150 -5z"/>\n<path d="M3165 1973 c-22 -3 -44 -9 -50 -14 -7 -7 27 -45 99 -115 89 -85 112\n-102 123 -92 21 17 59 95 73 148 6 25 13 53 16 63 5 16 -4 17 -108 15 -62 -1\n-131 -3 -153 -5z"/>\n<path d="M2784 1905 c-8 -21 2 -45 19 -45 8 0 20 7 27 15 10 12 10 18 0 30 -7\n8 -19 15 -27 15 -7 0 -16 -7 -19 -15z"/>\n<path d="M2570 1711 c-118 -129 -116 -125 -79 -152 36 -25 153 -68 188 -69\nl24 0 -7 141 c-4 78 -10 148 -13 155 -10 28 -33 13 -113 -75z"/>\n<path d="M2940 1774 c-6 -15 -14 -85 -17 -156 l-6 -128 23 0 c59 0 220 58 220\n79 0 10 -178 213 -197 224 -9 6 -16 0 -23 -19z"/>\n<path d="M10723 3116 c-422 -81 -742 -399 -828 -825 -23 -112 -16 -332 13\n-443 49 -183 142 -345 274 -476 317 -317 800 -392 1198 -186 475 245 682 800\n484 1301 -50 129 -113 221 -224 333 -147 149 -287 231 -479 282 -99 26 -334\n34 -438 14z m370 -292 c241 -62 436 -241 518 -475 57 -160 58 -323 3 -489\n-138 -414 -612 -619 -1012 -439 -152 68 -285 196 -358 344 -62 127 -78 197\n-78 335 0 139 16 208 81 340 83 169 252 313 438 374 118 38 285 42 408 10z"/>\n<path d="M11025 2710 c-10 -16 6 -300 17 -306 9 -6 218 193 218 208 0 16 -95\n69 -159 88 -74 23 -68 23 -76 10z"/>\n<path d="M10705 2696 c-53 -17 -138 -61 -154 -79 -10 -13 6 -31 100 -116 62\n-56 117 -100 123 -98 16 5 19 65 11 195 -8 125 -5 122 -80 98z"/>\n<path d="M11307 2341 c-53 -60 -97 -114 -97 -120 0 -18 41 -23 153 -16 159 9\n160 9 152 48 -10 49 -84 197 -98 197 -7 0 -57 -49 -110 -109z"/>\n<path d="M10370 2410 c-31 -43 -70 -136 -73 -173 l-2 -32 150 0 c134 0 150 2\n153 17 2 11 -32 54 -94 118 -53 55 -101 100 -105 100 -4 0 -17 -13 -29 -30z"/>\n<path d="M10883 2334 c-3 -8 2 -23 11 -32 15 -15 17 -15 32 0 21 21 11 48 -16\n48 -11 0 -23 -7 -27 -16z"/>\n<path d="M10839 2161 c-49 -50 -37 -121 27 -147 29 -12 39 -12 68 0 40 17 56\n42 56 88 -1 81 -93 117 -151 59z"/>\n<path d="M10672 2131 c-20 -12 -10 -46 14 -49 25 -4 40 24 23 44 -13 16 -19\n17 -37 5z"/>\n<path d="M11093 2104 c-4 -11 1 -22 12 -31 16 -11 21 -11 33 1 8 8 12 22 9 30\n-8 21 -46 21 -54 0z"/>\n<path d="M10336 1983 l-48 -4 5 -38 c5 -43 48 -134 81 -176 l23 -28 96 113\nc54 63 97 120 97 127 0 10 -23 13 -102 11 -57 -1 -125 -3 -152 -5z"/>\n<path d="M11261 1971 c-25 -3 -46 -11 -48 -17 -2 -6 45 -57 104 -113 l108\n-103 22 29 c25 30 58 110 72 174 l9 39 -112 -2 c-61 0 -131 -4 -155 -7z"/>\n<path d="M10880 1905 c-11 -13 -11 -19 3 -32 21 -21 49 -9 45 19 -4 28 -30 35\n-48 13z"/>\n<path d="M10699 1743 c-84 -89 -139 -152 -139 -161 0 -22 170 -92 223 -92 19\n0 19 5 13 133 -8 149 -13 177 -30 177 -6 0 -36 -26 -67 -57z"/>\n<path d="M11041 1781 c-14 -25 -31 -273 -20 -285 18 -20 239 46 239 72 0 9\n-197 232 -205 232 -2 0 -9 -9 -14 -19z"/>\n</g>\n</svg>')}var s=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.itemsPerPage=7,n.carsTotal=n.data.length,n.pageTotal=Math.ceil(n.carsTotal/n.itemsPerPage),n.pageCurrent=1,n.createPage(n.pageCurrent),n.mount(),n}return s(e,t),e.prototype.createPage=function(t){var e=this,n=this.createElement("section",this.mainContainer,{className:"garage-section"}),r=this.createElement("div",n,{className:"garage-header"});this.createElement("h1",r,{id:"text__garage-title",text:"Garage: (".concat(this.carsTotal,")"),className:"text__garage"}),this.garageCarList=this.createElement("div",n,{id:"garage-car-list"}),this.createGarageList(t,this.garageCarList);var o=this.createElement("div",n,{className:"pagination-btn-container"});this.btnPrev=this.createElement("button",o,{id:"button__prev-page",text:"PREV",className:"button__pagination",event:["click",function(){e.createPrevPage()}]}),this.btnPrev.setAttribute("disabled",""),this.btnNext=this.createElement("button",o,{id:"button__next-page",text:"NEXT",className:"button__pagination",event:["click",function(){e.createNextPage()}]})},e.prototype.createGarageList=function(t,e){this.raceCars=[];var n=0,r=this.itemsPerPage-1;t>1&&(r=(n=this.itemsPerPage*(t-1))+(this.itemsPerPage-1));for(var o=n;o<r&&o<this.carsTotal;o+=1)this.createHTMLElements(this.data[o],e)},e.prototype.createNextPage=function(){this.pageCurrent>0&&this.pageCurrent<this.pageTotal&&(document.querySelector("#button__prev-page").removeAttribute("disabled"),this.pageCurrent+=1,this.htmlElements=[],this.createGarageList(this.pageCurrent,this.garageCarList),this.garageCarList.replaceChildren(),this.mount(),this.pageCurrent===this.pageTotal&&document.querySelector("#button__next-page").setAttribute("disabled",""))},e.prototype.createPrevPage=function(){this.pageCurrent>1&&this.pageCurrent<=this.pageTotal&&(document.querySelector("#button__next-page").removeAttribute("disabled"),this.pageCurrent-=1,this.htmlElements=[],this.createGarageList(this.pageCurrent,this.garageCarList),this.garageCarList.replaceChildren(),this.mount(),1===this.pageCurrent&&document.querySelector("#button__prev-page").setAttribute("disabled",""))},e.prototype.createHTMLElements=function(t,e){var n=this;this.raceCars.push(t.id);var r=this.createElement("div",e,{id:"garage-car-name-"+t.id,className:"garage-car-name"}),o=this.createElement("div",e,{id:"garage-car-race-"+t.id,className:"garage-race"});this.createElement("span",r,{id:"img__garage-car-logo"+t.id,className:"img__garage-car-logo"}),this.createElement("h4",r,{id:"text__garage-car-"+t.id,text:"#".concat(t.id," ").concat(t.name),className:"text__garage-car"}),this.createElement("button",r,{id:"button__car-select"+t.id,text:"SELECT",className:"button__garage",event:["click",function(){n.controller.selectCar(t.id,t.name,t.color)}]}),this.createElement("button",r,{id:"button__car-remove"+t.id,text:"REMOVE",className:"button__garage",event:["click",function(){n.controller.deleteCar(t.id)}]});var a,i=this.createElement("div",o,{className:"garage-race-buttons"});this.createElement("button",i,{id:"button__car-engine-start-"+t.id,text:"A",className:"button__car-engine",title:"Start the engine",event:["click",function(){n.controller.setCarEngine(t.id,"started")}]}),this.createElement("button",i,{id:"button__car-engine-stop-"+t.id,text:"B",title:"Stop the engine",className:"button__car-engine"}),this.createElement("div",o,{className:"garage-race-car-logo",html:c("img__garage-car-".concat(t.id),"img__garage-car","".concat(t.color))}),this.createElement("div",o,{id:"garage-race-finish-logo-".concat(t.id),className:"garage-race-finish-logo",html:(a="img__race-finish-".concat(t.id),'\n<svg fill="#000000" id="'.concat(a,'" class="').concat("img__race-finish",'" version="1.1" id="img__race-finish" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t width="60px" height="60px" viewBox="0 0 453.405 453.405"\n\t xml:space="preserve">\n<g>\n\t<g>\n\t\t<path d="M382.08,60.394c-26.324-4.534-53.444-0.845-79.764,1.751c-26.223,2.587-53.604,5.753-79.585-0.397\n\t\t\tc-30.592-7.241-49.945-27.294-64.216-54.464c-3.935,10.646-7.869,21.291-11.803,31.938\n\t\t\tc-25.74,69.646-51.479,139.292-77.218,208.938L0,436.203l26.838,9.919l62.541-169.227c11.607,12.383,25.937,21.375,44.333,25.729\n\t\t\tc25.979,6.146,53.363,2.986,79.584,0.398c26.318-2.601,53.441-6.287,79.765-1.752c33.826,5.826,55.682,26.086,71.323,55.871\n\t\t\tc29.677-80.291,59.348-160.583,89.021-240.876C437.761,86.479,415.911,66.222,382.08,60.394z M385.379,203.349\n\t\t\tc-13.234-11.169-27.441-18.638-44.57-21.931c-5.715,15.458-11.428,30.916-17.141,46.374c17.131,3.295,31.335,10.764,44.572,21.932\n\t\t\tc-5.239,14.176-10.479,28.353-15.717,42.526c-13.234-11.168-27.443-18.642-44.573-21.93c5.239-14.177,10.479-28.353,15.718-42.528\n\t\t\tc-17.442-2.813-34.473-2.797-52.072-1.72c-5.238,14.176-10.479,28.353-15.717,42.528c-18.21,1.471-36.358,3.56-54.567,5.028\n\t\t\tc5.238-14.178,10.478-28.353,15.716-42.526c-17.599,1.078-34.631,1.096-52.073-1.719c-5.239,14.176-10.478,28.352-15.717,42.526\n\t\t\tc-17.128-3.29-31.341-10.763-44.572-21.933c5.238-14.174,10.478-28.351,15.716-42.525c13.236,11.17,27.442,18.64,44.573,21.932\n\t\t\tc5.712-15.458,11.427-30.918,17.139-46.376c-17.13-3.285-31.338-10.766-44.573-21.93c5.714-15.46,11.427-30.92,17.14-46.378\n\t\t\tc13.236,11.173,27.442,18.635,44.572,21.933c5.239-14.176,10.478-28.351,15.717-42.525c17.442,2.813,34.476,2.797,52.073,1.717\n\t\t\tc-5.238,14.175-10.478,28.351-15.717,42.526c18.209-1.471,36.357-3.558,54.567-5.028c5.238-14.175,10.479-28.351,15.717-42.527\n\t\t\tc17.601-1.078,34.629-1.095,52.072,1.719c-5.239,14.176-10.478,28.351-15.717,42.528c17.131,3.294,31.335,10.761,44.573,21.93\n\t\t\tC396.806,172.431,391.095,187.891,385.379,203.349z"/>\n\t\t<path d="M234.167,184.726c-5.713,15.459-11.426,30.917-17.14,46.376c18.21-1.472,36.359-3.56,54.568-5.03\n\t\t\tc5.713-15.457,11.426-30.916,17.139-46.374C270.523,181.169,252.376,183.257,234.167,184.726z"/>\n\t\t<path d="M234.167,184.726c5.714-15.458,11.427-30.918,17.14-46.375c-17.604,1.075-34.629,1.093-52.075-1.718\n\t\t\tc-5.713,15.458-11.426,30.917-17.139,46.375C199.536,185.824,216.566,185.807,234.167,184.726z"/>\n\t\t<path d="M305.873,133.323c-5.713,15.458-11.426,30.916-17.139,46.375c17.601-1.075,34.629-1.093,52.073,1.72\n\t\t\tc5.712-15.458,11.426-30.917,17.138-46.375C340.503,132.229,323.474,132.243,305.873,133.323z"/>\n\t</g>\n</g>\n</svg>'))})},e}(o),d=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),u=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.mainContainer.replaceChildren(),n.createHtmlElements(),n.mount(),n.carList=new l(n.data),n.addEvents(),n}return d(e,t),e.prototype.createHtmlElements=function(){var t=this,e=(this.createElement("section",this.mainContainer,{className:"modify-section",html:'\n  <form action="">\n\n    <div id="modify-panel__create">\n      <input \n        type="text" \n        id="input__car-create" \n        name="create-car"\n      >\n      <input \n        type="color" \n        id="input__car-color-create" \n        name="car-color-create" \n        value="#ffffff"\n      >\n      <button \n        type="button"\n        id="button__car-create"\n      >\n        CREATE\n      </button>\n    </div>\n\n    <div id="modify-panel__update">\n      <input \n        type="text" \n        id="input__car-update" \n        name="update-car"\n      >\n      <input \n        type="color" \n        id="input__car-color-update" \n        name="car-color-update" \n        value="#ffffff"\n      >\n      <button \n        type="button"\n        id="button__car-update"\n      >\n        UPDATE\n      </button>\n    </div>\n\n  </form>\n\n  '}),this.createElement("section",this.mainContainer,{className:"control-btn-section"}));this.createElement("button",e,{id:"button__race-start",text:"RACE",className:"button__control"}),this.createElement("button",e,{id:"button__race-return",text:"CANCEL",className:"button__control",disabled:""}),this.createElement("button",e,{id:"button__modify-generate",text:"GENERATE CARS",className:"button__control",event:["click",function(){t.controller.getRandomCars()}]})},e.prototype.addEvents=function(){var t=this,e=document.getElementById("button__car-create"),n=document.querySelector("#input__car-create"),r=document.querySelector("#input__car-color-create"),o=document.getElementById("button__car-update"),a=document.querySelector("#input__car-update"),i=document.querySelector("#input__car-color-update");document.getElementById("button__race-start").addEventListener("click",(function(){t.controller.race(t.carList.raceCars)})),e&&n&&r&&e.addEventListener("click",(function(){t.controller.createCar(n.value,r.value)})),o&&a&&i&&o.addEventListener("click",(function(){t.controller.updateCar(Number(a.getAttribute("carId")),a.value,i.value)}))},e}(o),h=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(t){function e(e){var n=t.call(this)||this;return n.data=e,n.itemsPerPage=10,n.carsTotal=n.data.length,n.pageTotal=Math.ceil(n.carsTotal/n.itemsPerPage),n.pageCurrent=1,n}return h(e,t),e.prototype.createPage=function(t,e){void 0===t&&(t="time"),void 0===e&&(e="asc");var n=document.querySelectorAll(".table__winners-data");n&&n.forEach((function(t){t.replaceChildren()}));var r=document.querySelector(".table__winners"),o=this.sortByKey(this.data,t,e),a=0,i=this.itemsPerPage;this.pageCurrent>1&&(i=(a=this.itemsPerPage*(this.pageCurrent-1))+this.itemsPerPage);for(var s=a;s<i&&s<this.carsTotal;s+=1){var l='<tr class="table__winners-data">\n                            <td>'.concat(o[s].id,"</td>\n                            <td>").concat(c("img__winners-car-logo-".concat(o[s].id),"img__winners-car-logo","".concat(o[s].color)),'\n                            </td>\n                            <td class="table__winners-name">').concat(o[s].name,"</td>\n                            <td>").concat(o[s].wins,"</td>\n                            <td>").concat(o[s].time,"</td>\n                          </tr>");r.innerHTML+=l}document.getElementById("main-container").setAttribute("style","")},e.prototype.nextPage=function(){this.pageCurrent>0&&this.pageCurrent<this.pageTotal&&(document.querySelector("#button__prev-page").removeAttribute("disabled"),this.pageCurrent+=1,this.pageCurrent===this.pageTotal&&document.querySelector("#button__next-page").setAttribute("disabled","")),this.createPage()},e.prototype.prevPage=function(){this.pageCurrent>1&&this.pageCurrent<=this.pageTotal&&(document.querySelector("#button__next-page").removeAttribute("disabled"),this.pageCurrent-=1,1===this.pageCurrent&&document.querySelector("#button__prev-page").setAttribute("disabled","")),this.createPage()},e.prototype.sortByKey=function(t,e,n){return void 0===n&&(n="asc"),function(t,e,n){if(n||2===arguments.length)for(var r,o=0,a=e.length;o<a;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],t,!0).sort((function(t,r){var o,a=t[e],i=r[e],c="string"==typeof a?a:String(a),s="string"==typeof i?i:String(i),l=parseFloat(c),d=parseFloat(s);return o=isNaN(l)||isNaN(d)?c.localeCompare(s):l-d,"asc"===n?o:-o}))},e}(o),p=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(t){function e(e){var n=t.call(this)||this;return n.winnersData=e,n.winnersList=new m(n.winnersData),n.cleanView(n.mainContainer),n.createHtmlElements(),n.mount(),n.winnersList.createPage(),n}return p(e,t),e.prototype.createHtmlElements=function(){var t=this,e=this.createElement("div",this.mainContainer,{id:"container__main"}),n=this.createElement("div",e,{id:"container__winners-title"});this.createElement("h1",n,{id:"text__winners-title",text:"Winners (".concat(this.winnersData.length,")"),className:"text__title"});var r=this.createElement("div",e,{id:"container__winners-pages"});this.paginationTitle=this.createElement("h4",r,{id:"text__winners-pages",text:"Page ".concat(this.winnersList.pageCurrent," of ").concat(this.winnersList.pageTotal),className:"text__total-pages"});var o=this.createElement("div",e,{id:"container__winners-list"}),a=(this.createElement("table",o,{className:"table__winners",html:'<tr class="table__winners-header">\n                                   <th></th>\n                                   <th></th>                                   \n                                   <th class="table__winners-header-sort" \n                                    onclick="">NAME\n                                   </th>\n                                   <th class="table__winners-header-sort" \n                                    onclick="">WINS\n                                   </th>\n                                   <th class="table__winners-header-sort" \n                                    onclick="">BEST TIME\n                                   </th>\n                                 </tr>'}),this.createElement("div",o,{className:"pagination-btn-container"}));this.btnPrev=this.createElement("button",a,{id:"button__prev-page",text:"PREV",className:"button__pagination",disabled:"",event:["click",function(){t.winnersList.prevPage(),t.paginationTitle.innerText="Page ".concat(t.winnersList.pageCurrent," of ").concat(t.winnersList.pageTotal)}]}),this.btnNext=this.createElement("button",a,{id:"button__next-page",text:"NEXT",className:"button__pagination",event:["click",function(){t.winnersList.nextPage(),t.paginationTitle.innerText="Page ".concat(t.winnersList.pageCurrent," of ").concat(t.winnersList.pageTotal)}]})},e}(o);function f(t,e,n){var r=document.getElementById("img__garage-car-"+t.toString()),o=document.getElementById("garage-race-finish-logo-".concat(t)).offsetLeft-10;o>1260&&(o=1260);var a=b(n,e),i=new KeyframeEffect(r,[{transform:"translateX(0)"},{transform:"translateX(".concat(o,"px)")}],{duration:a,easing:"ease-in-out",fill:"both"});return new Animation(i,document.timeline)}function b(t,e){return Number((t/e).toFixed(2))}var v=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(e,n){var r=t.call(this)||this;return r.winnerName=e,r.winnerTime=n,r.create(),r.mount(),r}return v(e,t),e.prototype.create=function(){var t=this;this.modalContainer=this.createElement("div",this.root,{id:"modal__container"}),this.modalWindow=this.createElement("div",this.modalContainer,{id:"modal__race-winner",className:"modal__race-winner"}),this.createElement("div",this.modalWindow,{id:"modal__race-winner-title",html:"<h1>RACE RESULT<h1>"}),this.createElement("div",this.modalWindow,{id:"modal__race-winner-car",html:"<p>Winner is <b>".concat(this.winnerName,"</b> <br>with time <b>").concat(this.winnerTime,"s</b></p>")});var e=this.createElement("div",this.modalWindow,{id:"modal__race-winner-close"});this.createElement("button",e,{id:"button__race-winner-close",className:"button__race-winner",text:"CLOSE",event:["click",function(){t.close()}]})},e.prototype.open=function(){this.modalWindow.classList.add("modal__race-winner-open")},e.prototype.close=function(){this.modalContainer.remove()},e}(o),y=function(t,e,n,r){return new(n||(n=Promise))((function(o,a){function i(t){try{s(r.next(t))}catch(t){a(t)}}function c(t){try{s(r.throw(t))}catch(t){a(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,c)}s((r=r.apply(t,e||[])).next())}))},w=function(t,e){var n,r,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=e.call(t,a)}catch(t){c=[6,t],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}},E=function(){function t(){this.model=new r,this.allAnimations=[]}return t.prototype.getGarage=function(){return y(this,void 0,void 0,(function(){var t;return w(this,(function(e){switch(e.label){case 0:return t=this,[4,this.model.getData("garage")];case 1:return t.data=e.sent(),[2,new u(this.data)]}}))}))},t.prototype.getCar=function(t){return y(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return e=this,[4,this.model.getData("garage/"+t)];case 1:return e.data=n.sent(),console.log(this.data),[2,this.data]}}))}))},t.prototype.getWinners=function(){return y(this,void 0,void 0,(function(){var t;return w(this,(function(e){switch(e.label){case 0:return[4,this.model.getWinnersInfo()];case 1:return t=e.sent(),[2,new g(t)]}}))}))},t.prototype.createCar=function(t,e){return y(this,void 0,void 0,(function(){var n;return w(this,(function(r){switch(r.label){case 0:return n={name:t,color:e},[4,this.model.createData("garage",n)];case 1:return r.sent()?this.getGarage():alert("Some error occurred. Please try again"),[2]}}))}))},t.prototype.deleteCar=function(t){return y(this,void 0,void 0,(function(){var e;return w(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,this.model.deleteData("garage",t)];case 1:return n.sent(),[4,this.model.deleteData("winners",t)];case 2:return n.sent(),this.getGarage(),[3,4];case 3:throw new(e=n.sent())(e);case 4:return[2]}}))}))},t.prototype.selectCar=function(t,e,n){var r=document.querySelector("#input__car-update"),o=document.querySelector("#input__car-color-update");r&&o&&(r.value=e,o.value=n,r.setAttribute("carId",t.toString()),document.body.scrollTop=0,document.documentElement.scrollTop=0)},t.prototype.updateCar=function(t,e,n){return y(this,void 0,void 0,(function(){var r;return w(this,(function(o){switch(o.label){case 0:return r={name:e,color:n},[4,this.model.updateData("garage",t,r)];case 1:return o.sent()?this.getGarage():alert("Some error occurred. Please try again"),[2]}}))}))},t.prototype.getRandomCars=function(){return y(this,void 0,void 0,(function(){var t=this;return w(this,(function(e){return[{brand:"Chevrolet",model:"Malibu",color:"#5A4496"},{brand:"Volkswagen",model:"Golf",color:"#175AB9"},{brand:"Kia",model:"Forte",color:"#9EBA53"},{brand:"Tesla",model:"Cybertruck",color:"#768F3D"},{brand:"Hyundai",model:"Elantra",color:"#47B457"},{brand:"BMW",model:"3 Series",color:"#EC0F1C"},{brand:"Honda",model:"Civic",color:"#4CFFFA"},{brand:"Mazda",model:"Mazda3",color:"#58CFCD"},{brand:"Nissan",model:"Altima",color:"#AF10D1"},{brand:"Audi",model:"Q7",color:"#B5BB9B"},{brand:"Nissan",model:"Pathfinder",color:"#474B1E"},{brand:"Audi",model:"Q5",color:"#E5EB9A"},{brand:"Volkswagen",model:"Tiguan",color:"#D67D61"},{brand:"Toyota",model:"RAV4",color:"#35C90C"},{brand:"Mercedes",model:"A-Class",color:"#C8F548"},{brand:"Subaru",model:"Forester",color:"#22F031"},{brand:"BMW",model:"Z4",color:"#9C5789"},{brand:"Tesla",model:"Model S",color:"#FED7D3"},{brand:"Chevrolet",model:"Silverado",color:"#E0C512"},{brand:"Honda",model:"Civic",color:"#B96B6A"},{brand:"Nissan",model:"Sentra",color:"#029830"},{brand:"Toyota",model:"Highlander",color:"#F1857F"},{brand:"Mazda",model:"Mazda3",color:"#7E6CA5"},{brand:"Volkswagen",model:"Golf",color:"#77F358"},{brand:"Chevrolet",model:"Equinox",color:"#DFDC27"},{brand:"BMW",model:"3 Series",color:"#B8DBD2"},{brand:"Tesla",model:"Model 3",color:"#7E91A8"},{brand:"Audi",model:"A3",color:"#8F61E9"},{brand:"Lexus",model:"ES",color:"#E6CA83"},{brand:"Subaru",model:"Legacy",color:"#16BCF0"},{brand:"Lexus",model:"RX",color:"#E67D65"},{brand:"Subaru",model:"Crosstrek",color:"#A56741"},{brand:"Volkswagen",model:"Jetta",color:"#466884"},{brand:"Honda",model:"Civic",color:"#EF1281"},{brand:"Hyundai",model:"Santa Fe",color:"#213000"},{brand:"BMW",model:"X3",color:"#61016F"},{brand:"Chevrolet",model:"Impala",color:"#C127C5"},{brand:"Audi",model:"A4",color:"#2315E3"},{brand:"Kia",model:"Sportage",color:"#895EEE"},{brand:"Mazda",model:"MX-5",color:"#663988"},{brand:"Chevrolet",model:"Tahoe",color:"#5CC5D6"},{brand:"Audi",model:"A4",color:"#8D95E3"},{brand:"Tesla",model:"Model 3",color:"#F20FC7"},{brand:"Honda",model:"Civic",color:"#8F4797"},{brand:"Mercedes",model:"C-Class",color:"#E41D69"},{brand:"BMW",model:"X5",color:"#CF7B79"},{brand:"Mazda",model:"CX-9",color:"#865B01"},{brand:"Volkswagen",model:"Jetta",color:"#B32F7E"},{brand:"Nissan",model:"Rogue",color:"#718580"},{brand:"Subaru",model:"Crosstrek",color:"#8BFD1C"},{brand:"Mazda",model:"CX-5",color:"#D1AC7F"},{brand:"Nissan",model:"Sentra",color:"#1C8C23"},{brand:"Ford",model:"F-150",color:"#C7534D"},{brand:"Chevrolet",model:"Equinox",color:"#743D02"},{brand:"Mercedes",model:"C-Class",color:"#4DCF50"},{brand:"Honda",model:"CR-V",color:"#DC00CA"},{brand:"Toyota",model:"Highlander",color:"#3E36E0"},{brand:"Subaru",model:"Crosstrek",color:"#50CEE6"},{brand:"Kia",model:"Soul",color:"#A77046"},{brand:"Volkswagen",model:"Jetta",color:"#A247A1"},{brand:"Tesla",model:"Model X",color:"#471123"},{brand:"Kia",model:"Sportage",color:"#AC95D3"},{brand:"Chevrolet",model:"Tahoe",color:"#69B459"},{brand:"Hyundai",model:"Santa Fe",color:"#5CCC38"},{brand:"Toyota",model:"Highlander",color:"#F96EAA"},{brand:"Audi",model:"A3",color:"#22D3CB"},{brand:"Volkswagen",model:"Golf",color:"#BC07A3"},{brand:"Mazda",model:"CX-5",color:"#2F9BF9"},{brand:"Honda",model:"Fit",color:"#B563D1"},{brand:"Lexus",model:"ES",color:"#E58F34"},{brand:"Lexus",model:"RX",color:"#FD8FD3"},{brand:"Tesla",model:"Cybertruck",color:"#2DDD9A"},{brand:"Chevrolet",model:"Tahoe",color:"#05F2CA"},{brand:"Mazda",model:"MX-5",color:"#3AC34B"},{brand:"Kia",model:"Optima",color:"#39F8D2"},{brand:"BMW",model:"5 Series",color:"#E43B55"},{brand:"Nissan",model:"Altima",color:"#7A438D"},{brand:"Ford",model:"Mustang",color:"#F9565B"},{brand:"Audi",model:"A4",color:"#7BDBA9"},{brand:"Hyundai",model:"Kona",color:"#8A9A73"},{brand:"Volkswagen",model:"Passat",color:"#971937"},{brand:"Toyota",model:"Highlander",color:"#15A66C"},{brand:"Chevrolet",model:"Impala",color:"#70D4D1"},{brand:"Honda",model:"Accord",color:"#3BDD70"},{brand:"Subaru",model:"Crosstrek",color:"#396B20"},{brand:"Hyundai",model:"Tucson",color:"#4F7EB8"},{brand:"Ford",model:"Escape",color:"#E7BAB7"},{brand:"Audi",model:"A6",color:"#052812"},{brand:"Lexus",model:"NX",color:"#8FEC16"},{brand:"BMW",model:"3 Series",color:"#0D4ED4"},{brand:"Mercedes",model:"GLC",color:"#680A7A"},{brand:"Nissan",model:"Murano",color:"#885F56"},{brand:"Audi",model:"A3",color:"#193443"},{brand:"Tesla",model:"Model Y",color:"#DA794E"},{brand:"Toyota",model:"Highlander",color:"#EF486B"},{brand:"Ford",model:"F-150",color:"#0AFF2C"},{brand:"Hyundai",model:"Sonata",color:"#BE40F8"},{brand:"Honda",model:"Pilot",color:"#E596C5"},{brand:"Chevrolet",model:"Silverado",color:"#673C41"},{brand:"Subaru",model:"Forester",color:"#85C26B"}].forEach((function(e){var n=e.brand+" "+e.model;t.createCar(n,e.color)})),[2]}))}))},t.prototype.setCarEngine=function(t,e){return y(this,void 0,void 0,(function(){var n,r,o,a,i,c=this;return w(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.model.carEngine(t,e)];case 1:return n=s.sent(),r=document.getElementById("button__car-engine-start-"+t),o=document.getElementById("button__car-engine-stop-"+t),"started"===e?(r.setAttribute("disabled",""),(a=f(t,n.velocity,n.distance)).addEventListener("finish",(function(){c.model.carEngine(t,"stopped")})),o.addEventListener("click",(function(){a.cancel(),r.removeAttribute("disabled")})),a.play(),this.model.carEngine(t,"drive").then((function(t){500===t.status&&(console.log("Car ".concat(t.id," engine was broken down")),a.pause())}))):"stopped"===e?console.log("car is stopped"):console.log("wrong request"),[3,3];case 2:throw i=s.sent(),new Error(i);case 3:return[2]}}))}))},t.prototype.race=function(t){return y(this,void 0,void 0,(function(){var e,n,r,o=this;return w(this,(function(a){return e=document.getElementById("button__race-start"),n=document.getElementById("button__race-return"),e&&e.setAttribute("disabled",""),r=[],t.forEach((function(t){r.push(o.model.carEngine(t,"started"))})),Promise.allSettled(r).then((function(t){var r=[];return t.forEach((function(t){if("fulfilled"===t.status){var a=t.value.id,i=t.value.velocity,c=t.value.distance,s=Number(b(c,i)/1e3).toFixed(2),l=f(a,i,c);o.allAnimations.push(l);var d=new Promise((function(t){l.addEventListener("finish",(function(){o.model.carEngine(a,"stopped"),t({id:a,wins:1,time:s})})),n.addEventListener("click",(function(){e.removeAttribute("disabled"),n.setAttribute("disabled",""),document.querySelectorAll(".img__race-finish").forEach((function(t){t.classList.remove("img__race-end")})),l.cancel(),t("Car ".concat(a," animation cancelled"))}))}));r.push(d),l.play(),o.model.carEngine(a,"drive").then((function(t){500===t.status&&(console.log("Car ".concat(t.id," engine was broken down")),l.pause())}))}})),Promise.race(r)})).then((function(t){document.getElementById("img__race-finish-".concat(t.id)).classList.add("img__race-end"),o.model.getData("garage",t.id).then((function(e){var r=setInterval((function(){var a=!1;o.allAnimations.forEach((function(t){"running"===t.playState&&(a=!0)})),!1===a&&(clearInterval(r),new _(e.name,t.time).open(),n.removeAttribute("disabled"))}),1e3)})),o.model.getData("winners",t.id).then((function(e){if(e){console.log(e);var n;n=t.time<e.time?t.time:e.time;var r={wins:e.wins+1,time:n};o.model.updateData("winners",t.id,r)}else{var a={id:t.id,time:t.time,wins:1};o.model.createData("winners",a)}}))})),[2]}))}))},t.prototype.start=function(){return y(this,void 0,void 0,(function(){return w(this,(function(t){return console.log("App is running..."),new i,this.getGarage(),[2]}))}))},t}();(new E).start()})();